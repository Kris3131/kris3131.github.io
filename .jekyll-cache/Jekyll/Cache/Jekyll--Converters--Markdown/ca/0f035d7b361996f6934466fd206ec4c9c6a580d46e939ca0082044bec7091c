I"€ <p>Routesã€Modelã€Viewã€Controller çš„æ¦‚å¿µå›°æ“¾å¾ˆä¹…ï¼Œç°¡å–®ä¾†èªªï¼š</p>

<p>MVC æ˜¯<strong>è»Ÿé«”è¨­è¨ˆçš„ä¸€ç¨®æ¨¡å¼</strong>(software design pattern)ï¼Œå¯ä»¥åƒè€ƒ<a href="https://www.wikiwand.com/en/Model%E2%80%93view%E2%80%93controller">Wiki</a></p>

<p>é€²å…¥ MVC ä¸–ç•Œä¹‹å‰ï¼Œè£œäº†ä¸€äº› Internet èˆ‡ Web çš„é‹ä½œé‚è¼¯ï¼Œ</p>

<h2 id="internet-èˆ‡-web">Internet èˆ‡ Web</h2>

<h1 id="ä»€éº¼æ˜¯-internet">ä»€éº¼æ˜¯ internet?</h1>

<ul>
  <li><strong>Internet æ˜¯ Web çš„åŸºç¤</strong>ï¼Œæ›å¥è©±èªªï¼Œ Web æ˜¯å»ºæ§‹åœ¨ Internet ä¹‹ä¸Šã€‚</li>
  <li>
    <p><strong>Internet</strong> æ˜¯é›»è…¦èˆ‡é›»è…¦ä¹‹é–“çš„é€£çµ</p>

    <p><img src="/assets/post_img/internet-schema-1.png" alt="Route" title="resource: MDN" /></p>

    <p>åœ–ç‰‡ä¾†æºï¼šMDN</p>
  </li>
  <li>
    <p><strong>Route</strong> æ˜¯ç•¶é›»è…¦é–“çš„é€£çµé—œä¿‚è¤‡é›œæ™‚å€™çš„ä¸€ç¨®é€£çµç®¡ç†</p>

    <p><img src="/assets/post_img/internet-schema-3.png" alt="Route" title="resource: MDN" /></p>

    <p>åœ–ç‰‡ä¾†æºï¼šMDN</p>
  </li>
  <li>
    <p><strong>network</strong> æ˜¯ Routes è¦æ¨¡è®Šå¤§ï¼Œé€£çµ Routes é–“çš„é€£çµç®¡ç†</p>

    <p><img src="/assets/post_img/internet-schema-5.png" alt="network" title="resource: MDN" /></p>

    <p>åœ–ç‰‡ä¾†æºï¼šMDN</p>
  </li>
  <li>
    <p><strong>ISP(Internet Service Provider)</strong> æ˜¯ network é–“çš„é€£çµç®¡ç†</p>

    <p><img src="/assets/post_img/internet-schema-7.png" alt="Internet" title="resource: MDN" /></p>
  </li>
</ul>

<p>åœ–ç‰‡ä¾†æºï¼šMDN</p>

<ul>
  <li><strong>IP(Internet Protocol)</strong> é€£çµåˆ° network çš„è­˜åˆ¥ï¼Œä¸€é€£ä¸²æ•¸å­—çµ„æˆ <code class="language-plaintext highlighter-rouge">142.250.190.78</code>ï¼Œä½†æˆ‘å€‘é€£åˆ°ç¶²é ä¸Šä¸å¤ªå¯èƒ½æœƒæŠŠä¸€æ•´ä¸²æ•¸å­—èƒŒå‡ºä¾†ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦ <strong>domain name</strong>ï¼Œ<code class="language-plaintext highlighter-rouge">https://www.google.com.tw/</code></li>
</ul>

<h1 id="ä»€éº¼æ˜¯-web">ä»€éº¼æ˜¯ Web?</h1>

<p>Web æ˜¯ä»‹æ–¼å®¢æˆ¶(client)èˆ‡ä¸»æ©Ÿ(server)ä¹‹é–“çš„é—œä¿‚ï¼Œ client æœƒå‘ server ç™¼é€è«‹æ±‚ï¼Œserver æœƒå›æ‡‰ client çš„éœ€æ±‚ï¼Œç¶²è·¯ä¸–ç•Œçš„ä¾›éœ€é—œä¿‚ã€‚</p>

<p><img src="/assets/post_img/simple-client-server.png" alt="Web" title="resource: pixabay" /></p>

<p>MDN é—œæ–¼ Web çš„æè¿°å¾ˆæ·±åˆ»</p>

<blockquote>
  <blockquote>
    <p>For now, letâ€™s imagine that the web is a road. On one end of the road is the client, which is like your house. On the other end of the road is the server, which is a shop you want to buy something from.</p>
  </blockquote>
</blockquote>

<p><img src="https://cdn.pixabay.com/photo/2017/01/28/02/24/japan-2014617_1280.jpg" alt="Web" title="resource: pixabay" /></p>

<p>ä¾ç…§ç¶²è·¯ä¸–ç•Œé‹ä½œæ¨¡å¼ä¾†çœ‹ï¼Œå¯ä»¥è§£é‡‹ç‚ºä»€éº¼åœ¨ Ruby on Rails çš„å»ºç«‹æœƒä¾ç…§<strong>Routes &gt; Model &gt; View &gt; Controller</strong>é€™æ¨£çš„é †åºé€²è¡Œ</p>

<h2 id="routes">Routes</h2>

<p>è·¯å¾‘æ˜¯å»ºç«‹ client èˆ‡ server ä¹‹é–“æ©‹æ¨‘ã€‚<br />
Rails çš„ç¬¬ä¸€æ­¥ï¼šè¨­å®š Routesã€‚<br />
é‚£æ˜¯ä¸æ˜¯å¯ä»¥æŠŠè‡ªå·±æƒ³åƒæˆä½¿ç”¨è€…ï¼Ÿ<br />
é€²å…¥é é¢å¾Œï¼Œ<br />
æœŸå¾…çœ‹åˆ°çš„å…§å®¹æ˜¯ä»€éº¼ï¼Ÿ<br />
ç•«é¢çš„æ“ä½œæµç¨‹æ˜¯ä»€éº¼ï¼Ÿ<br />
æœƒæœŸå¾…ç¶²é æœ‰ä»€éº¼åŠŸèƒ½ï¼Ÿ<br />
æ˜¯è³¼ç‰©å‹ç¶²ç«™ï¼Ÿ<br />
è³‡è¨Šç€è¦½ç¶²ç«™ï¼Ÿ<br />
è³¼ç‰©ç¶²ç«™ï¼Ÿ<br />
ç™»å…¥åŠŸèƒ½æ‡‰è©²æœ‰å“ªäº›ï¼Ÿ<br /></p>

<p>é€éé€™æ¨£çš„ç–‘å•å¥ä¾†æ‰¾å‡ºéœ€è¦å»ºç«‹çš„ Model éœ€è¦å“ªäº›å…§å®¹ &gt; View ç•«é¢è¦æ€éº¼å‘ˆç¾ &gt; Controller ä»‹æ–¼ DataBase èˆ‡ View ä¹‹é–“çš„æ©‹æ¨‘</p>

<h2 id="model">Model</h2>

<p>Model æ˜¯ç”¨ Ruby é¡åˆ¥ (class)çš„æ–¹å¼è¡¨ç¤º dataï¼Œåœ¨ Model é€é Active Record å’Œ database æ‹¿åˆ°éœ€è¦çš„è³‡æ–™ã€‚
å»ºç«‹ model éœ€è¦æ³¨æ„ model_name çš„<strong>å¤§å°å¯«èˆ‡å–®è¤‡æ•¸å•é¡Œ</strong>ã€‚
é€™è£¡å¯ä»¥é€™æ¨£è¨˜ï¼š<strong>å› ç‚ºmodelæ˜¯ä¸€ç­†ä¸€ç­†çš„è³‡æ–™å¯«é€²è³‡æ–™åº«</strong></p>

<p><code class="language-plaintext highlighter-rouge">bin/rails generate model Article title:string body:text</code>
æ„æ€æ˜¯ï¼šç”¨rails å»ºç«‹ä¸€å€‹ Article çš„ modelï¼Œåœ¨é€™ model è£¡é¢éœ€è¦çš„è³‡æ–™çµæ§‹ï¼Œtitleæ˜¯stringï¼Œbodyæ˜¯text</p>

<h1 id="activerecord">ActiveRecord</h1>
<p>Active Record æ˜¯ MVC è£¡é¢çš„ Mï¼Œå‘ˆç¾è³‡æ–™èˆ‡é‚è¼¯
Object Relational Mapping(ORM) system æ˜¯é€£çµè³‡æ–™åº«çš„ç®¡ç†æ¶æ§‹ã€‚</p>

<p>å†æ·±å…¥çš„è§£é‡‹ Active Recordï¼š</p>

<ul>
  <li>å‘ˆç¾ data è·Ÿ model</li>
  <li>model ä¹‹é–“çš„é—œè¯æ€§ã€éšå±¤</li>
  <li>é©—è­‰ Model çš„è³‡æ–™æ ¼å¼</li>
  <li>ç”¨ç‰©ä»¶å°å‘çš„æ–¹å¼ä¾†å‘ˆç¾è³‡æ–™çµæ§‹</li>
</ul>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
<span class="k">end</span></code></pre></figure>

<h1 id="database-migration">Database Migration</h1>

<p>å®˜æ–¹æ–‡ä»¶å°æ–¼Database Migrationçš„è§£é‡‹æ˜¯</p>

<blockquote>
  <blockquote>
    <p>Migrations are used to alter the structure of an applicationâ€™s database. In Rails applications, migrations are written in Ruby so that they can be database-agnostic.</p>
  </blockquote>
</blockquote>

<p>æˆ‘çš„ç†è§£æ˜¯ï¼šç”¨ Ruby è¡¨ç¤ºçš„ database çš„è³‡æ–™çµæ§‹ï¼Œæ›´å¥½ç†è§£ã€‚</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">CreateResumes</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">6.1</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:resumes</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:title</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:content</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:status</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>ä¹çœ‹ä¹‹ä¸‹ï¼ŒMigration è·Ÿ ActiveRecord å¥½åƒæœ‰é‚£éº¼ä¸€é»åƒï¼Ÿ
<strong>æ²’æœ‰ä»–å€‘ä¸ä¸€æ¨£ï¼</strong></p>

<p>Migration æ˜¯æŠŠ database å…§çš„è³‡æ–™æ ¼å¼åˆ—å‡ºä¾†ï¼Œæ‰€ä»¥è¦èª¿æ•´ column çš„é …ç›®ï¼Œå¯ä»¥å¦å¤–é€²è¡Œä¸€äº›å®¢è£½åŒ–èª¿æ•´
<code class="language-plaintext highlighter-rouge">bin/rails generate migration AddPartNumberToProducts part_number:string</code>
æ„æ€æ˜¯ï¼šç”¨rails å»ºç«‹ä¸€å€‹ migration æª”æ¡ˆï¼Œåœ¨é€™æª”æ¡ˆè£¡é¢éœ€è¦å†åŠ ä¸Šä¸€å€‹ part_number çš„ column åˆ° products çš„ model ä¸­ï¼Œä»–çš„ data type æ˜¯ string</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">AddPartNumberToProducts</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">6.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">add_column</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">:part_number</span><span class="p">,</span> <span class="ss">:string</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>ActiveRecord æ˜¯å®šç¾©è³‡æ–™é–“çš„é—œè¯æ€§èˆ‡é©—è­‰è³‡æ–™ã€‚</p>

<p>æœ€å¾Œåœ¨å»ºç«‹ Migration å¾Œé‚„è¦å†å°‡éœ€è¦çš„ data type å¯«é€²è³‡æ–™åº«ï¼Œ
<code class="language-plaintext highlighter-rouge">bin/rails db:migrate</code>
æœ‰äº›äººç¨±ç‚ºå…·ç¾åŒ–ï¼Œ
æˆ‘è¦ºå¾—å¤ªæŠ½è±¡ï¼Œ
å¯èƒ½æ›´åƒä¸€ç¨®å¯«é€²è³‡æ–™åº«å‰çš„<strong>é˜²å‘†æ©Ÿåˆ¶</strong>ï¼Œåœ¨å¯«é€²å»ä¹‹å‰ï¼Œè¦æ”¹éƒ½æ˜¯æœ‰æ©Ÿæœƒçš„ï¼Œå¯«é€²å»ä¹‹å¾Œå°±æ˜¯è¦åœ¨é‡æ–° generate ä¸€å€‹ migrateâ€¦</p>

<h2 id="view">View</h2>

<p>ä»¥ client çš„è§’åº¦è€Œè¨€ï¼Œç•¶ web ç™¼é€ä¸€å€‹ requestå¾Œï¼ŒAction Controller è² è²¬èˆ‡ database è¦ä¾†çš„è³‡æ–™ï¼ŒåŸ·è¡Œ CRUD Actionï¼Œ Action View æœƒé¡¯ç¤ºè³‡æ–™çš„ç•«é¢ã€‚
View ä¸­é‚„æœ‰è¨±å¤šç´°ç¯€ï¼Œç•™åˆ°æ¥ä¸‹ä¾†çš„å¯¦ä½œç´€éŒ„åœ¨ç´°ç´°ä»‹ç´¹ï¼Œ</p>

<h2 id="controller">Controller</h2>
:ET